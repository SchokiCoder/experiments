/* Copyright (c) 2023, Andy Frank Schoknecht
 * Use of this source code is governed by the BSD-3-Clause
 * license, that can be found in the LICENSE file.
 */

#include <stdio.h>

#include "bakery.h"

void
bake_values(const char              *filename,
	    const struct ValueDough  vdough[],
	    const long unsigned	     n)
{
	long unsigned i;

	printf("#ifndef %s\n"
	    "#define %s\n\n", filename, filename);

	printf("/* This file was GENERATED BY A PROGRAM, don't edit it. */\n\n");

	for (i = 0; i < n; i += 1) {
		if (vdough[i].preprocessor == 0) {
			printf("static const %s %s = %s;\n",
			    vdough[i].type, vdough[i].name, vdough[i].value);
		} else {
			printf("#define %s %s\n", vdough[i].name, vdough[i].value);
		}
	}

	printf("\n" "#endif /* %s */\n", filename);
}
